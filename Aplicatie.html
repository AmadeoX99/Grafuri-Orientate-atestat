<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <title>Aplicație Grafuri Orientate</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background: #FAF5EE; /* gri mai deschis și plăcut */
            color: #333;
            text-align: center;
        }
        #controls {
            margin: 20px;
        }
        #graphCanvas {
            background: white;
            border: 2px solid #ccc;
            margin-top: 20px;
        }

        nav {
            background: #1D503A;
            padding: 20px;
        }

        nav a {
            position: relative;
            color: #FAF5EE;
            font-family: Arial, Helvetica, sans-serif;
            margin: 0 30px;
            font-size: 22px;
            font-weight: bold;
}

        nav a::after {
            content: '';
            position: absolute;
            width: 0%;
            height: 2px;
            left: 0;
            bottom: -5px;
            background-color: #FFD700;
            transition: width 0.3s;
        }

        nav a:hover::after {
            width: 100%;
        }

        nav a:hover {
            text-decoration: underline;
            color: #fabf6c; /* galben deschis la hover */
            transition: color 0.3s ease;
        }
    </style>
</head>


<body>

    <nav>
        <a href="index.html">Acasă</a>
        <a href="Teorie.html">Teorie</a>
        <a href="Aplicatie.html">Aplicație</a>
    </nav>

<h1>Aplicație Grafuri Orientate</h1>
<p>Click pe canvas pentru a adăuga noduri și muchii orientate.</p>

<div id="controls">
    <button onclick="adaugaMuchie()">Adaugă Arc</button>
    <button onclick="reseteazaGraf()">Resetează Graf</button>
</div>

<canvas id="graphCanvas" width="800" height="600"></canvas>

<script>
    let noduri = [];
    let muchii = [];
    let idNod = 0;

    const canvas = document.getElementById('graphCanvas');
    const ctx = canvas.getContext('2d');

    canvas.addEventListener('click', (e) => {
        const rect = canvas.getBoundingClientRect();
        const x = e.clientX - rect.left;
        const y = e.clientY - rect.top;

        noduri.push({ id: idNod++, x, y });
        deseneazaGraf();
    });

    function deseneazaGraf() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let muchie of muchii) {
            ctx.beginPath();
            ctx.moveTo(muchie.from.x, muchie.from.y);
            ctx.lineTo(muchie.to.x, muchie.to.y);
            ctx.stroke();

            const dx = muchie.to.x - muchie.from.x;
            const dy = muchie.to.y - muchie.from.y;
            const lungime = Math.sqrt(dx * dx + dy * dy);
            const ux = dx / lungime;
            const uy = dy / lungime;

            ctx.beginPath();
            ctx.fillStyle = "#FFD700"
            ctx.moveTo(muchie.to.x, muchie.to.y);
            ctx.lineTo(muchie.to.x - 10 * ux - 5 * uy, muchie.to.y - 10 * uy + 5 * ux);
            ctx.lineTo(muchie.to.x - 10 * ux + 5 * uy, muchie.to.y - 10 * uy - 5 * ux);
            ctx.closePath();
            ctx.fill();
        }

        for (let nod of noduri) {
            ctx.beginPath();
            ctx.arc(nod.x, nod.y, 20, 0, 2 * Math.PI);
            ctx.fillStyle = "#FFD700";
            ctx.fill();
            ctx.stroke();
            ctx.fillStyle = "black";
            ctx.font = "13px Arial";
            ctx.textAlign = "center";
            ctx.textBaseline = "middle";
            ctx.fillText(nod.id, nod.x, nod.y);
        }
    }

    function adaugaMuchie() {
        if (noduri.length < 2) {
            alert("Adaugă mai întâi noduri!");
            return;
        }
        const deLa = prompt("ID nod start:");
        const catre = prompt("ID nod destinație:");
        const nodStart = noduri.find(n => n.id == deLa);
        const nodEnd = noduri.find(n => n.id == catre);

        if (nodStart && nodEnd) {
            muchii.push({ from: nodStart, to: nodEnd });
            deseneazaGraf();
        } else {
            alert("ID-uri incorecte!");
        }
    }

    function reseteazaGraf() {
        if (confirm("Sigur vrei să ștergi graf-ul?")) {
            noduri = [];
            muchii = [];
            idNod = 0;
            deseneazaGraf();
        }
    }
</script>

</body>
</html>